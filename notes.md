# Learning notes

## JWT Pizza code study and debugging

As part of `Deliverable ⓵ Development deployment: JWT Pizza`, start up the application and debug through the code until you understand how it works. During the learning process fill out the following required pieces of information in order to demonstrate that you have successfully completed the deliverable.

+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| User activity                                                                           | Frontend component      | Backend endpoints                                          | Database SQL                                                                                                                                                                                                  |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View home page                                                                          | home.jsx                | none                                                       | none                                                                                                                                                                                                          |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Register new user                                                                       | login.jsx               | [PUT] /api/auth                                            | INSERT INTO user (name, email, password) VALUES (?, ?, ?)                                                                                                                                                     |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (t@jwt.com, pw: test)                                                                   |                         |                                                            | INSERT INTO userRole (userId, role, objectId) VALUES (?, ?, ?)                                                                                                                                                |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Login new user                                                                          | login.jsx               | [PUT] /api/auth                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (t@jwt.com, pw: test)                                                                   |                         |                                                            | `SELECT * FROM user WHERE email=?                                                                                                                                                                             |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT * FROM userRole WHERE userId=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | database.js                                                                                                                                                                                                   |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO auth (token, userId) VALUES (?, ?)`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Order pizza                                                                             | menu.tsx                | [GET]/api/order/menu                                       | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         | payment.tsx             | [Get] /api/franchise                                       | `SELECT * FROM menu`                                                                                                                                                                                          |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| *had to sign in as the admin because t@jwt.com didn’t have any stores for some reason*  |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | [POST] /api/order                                          | /api/franchise                                                                                                                                                                                                |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM franchise`                                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM store WHERE franchiseId=?`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | —---                                                                                                                                                                                                          |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | /api/order                                                                                                                                                                                                    |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO dinerOrder (dinerId, franchiseId, storeId, date) VALUES (?, ?, ?, now())`                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO orderItem (orderId, menuId, description, price) VALUES (?, ?, ?, ?)`                                                                                                                             |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Verify pizza                                                                            | delivery.tsx            | [POST] /api/order/verify                                   | none                                                                                                                                                                                                          |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | **verifying with jwt                                       |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View profile page                                                                       | dinerDashboard.tsx      | [GET]  /api/order                                          | `SELECT userId FROM auth WHERE token=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, franchiseId, storeId, date FROM dinerOrder WHERE dinerId=? LIMIT ${offset},${config.db.listPerPage}`                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, menuId, description, price FROM orderItem WHERE orderId=?`                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View franchise                                                                          | franchiseDashboard.tsx  | Just pulls up why you should franchise                     | `SELECT userId FROM auth WHERE token=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (as diner)                                                                              |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Logout                                                                                  | logout.tsx              | [DELETE] /api/auth                                         | `SELECT userId FROM auth WHERE token=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         | -> home.tsx             |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | DELETE FROM auth WHERE token=?                                                                                                                                                                                |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View About page                                                                         | about.tsx               | none                                                       | none                                                                                                                                                                                                          |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View History page                                                                       | history.tsx             | none                                                       | none                                                                                                                                                                                                          |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Login as franchisee                                                                     | login.tsx               | [PUT] /api/auth                                            | `SELECT * FROM user WHERE email=?`                                                                                                                                                                            |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (f@jwt.com, pw: franchisee)                                                             |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT * FROM userRole WHERE userId=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO auth (token, userId) VALUES (?, ?)`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View franchise                                                                          | franchiseDashboard.tsx  | [GET] /api/franchise/:userid                               | `SELECT userId FROM auth WHERE token=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (as franchisee)                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT objectId FROM userRole WHERE role='franchisee' AND userId=?`                                                                                                                                          |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM franchise WHERE id in (${franchiseIds.join(',')})`                                                                                                                                      |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT u.id, u.name, u.email FROM userRole AS ur JOIN user AS u ON u.id=ur.userId WHERE ur.objectId=? AND ur.role='franchisee'`                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT s.id, s.name, COALESCE(SUM(oi.price), 0) AS totalRevenue FROM dinerOrder AS do JOIN orderItem AS oi ON do.id=oi.orderId RIGHT JOIN store AS s ON s.id=do.storeId WHERE s.franchiseId=? GROUP BY s.id` |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Create a store                                                                          | createStore.tsx         | [POST]                                                     | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | /api/franchise/${franchise.id}/store                       |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT u.id, u.name, u.email FROM userRole AS ur JOIN user AS u ON u.id=ur.userId WHERE ur.objectId=? AND ur.role='franchisee'`                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | [GET] /api/franchise/${user.id}                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT s.id, s.name, COALESCE(SUM(oi.price), 0) AS totalRevenue FROM dinerOrder AS do JOIN orderItem AS oi ON do.id=oi.orderId RIGHT JOIN store AS s ON s.id=do.storeId WHERE s.franchiseId=? GROUP BY s.id` |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO store (franchiseId, name) VALUES (?, ?)`                                                                                                                                                         |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT objectId FROM userRole WHERE role='franchisee' AND userId=?`                                                                                                                                          |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM franchise WHERE id in (${franchiseIds.join(',')})`                                                                                                                                      |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Close a store                                                                           | closeStore.tsx          | [DELETE] /api/franchise/${franchise.id}/store/${store.id}  | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT u.id, u.name, u.email FROM userRole AS ur JOIN user AS u ON u.id=ur.userId WHERE ur.objectId=? AND ur.role='franchisee'`                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT s.id, s.name, COALESCE(SUM(oi.price), 0) AS totalRevenue FROM dinerOrder AS do JOIN orderItem AS oi ON do.id=oi.orderId RIGHT JOIN store AS s ON s.id=do.storeId WHERE s.franchiseId=? GROUP BY s.id` |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `DELETE FROM store WHERE franchiseId=? AND id=?`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Login as admin                                                                          | login.tsx               | [PUT] /api/auth                                            | `SELECT * FROM user WHERE email=?`                                                                                                                                                                            |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| (a@jwt.com, pw: admin)                                                                  |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT * FROM userRole WHERE userId=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO auth (token, userId) VALUES (?, ?)`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| View Admin page                                                                         | adminDashboard.tsx      | /api/franchise, no type?                                   | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | [GET]?                                                     |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM franchise`                                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM store WHERE franchiseId=?`                                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Create a franchise for t@jwt.com                                                        | createFranchise.tsx     | [POST] /api/franchise                                      | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `SELECT id, name FROM user WHERE email=?`                                                                                                                                                                     |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO franchise (name) VALUES (?)`                                                                                                                                                                     |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `INSERT INTO userRole (userId, role, objectId) VALUES (?, ?, ?)`                                                                                                                                              |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
| Close the franchise for t@jwt.com                                                       | closeFranchise.tsx      | [DELETE]                                                   | `SELECT userId FROM auth WHERE token=?                                                                                                                                                                        |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         | /api/franchise/${franchise.id}                             |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `DELETE FROM store WHERE franchiseId=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `DELETE FROM userRole WHERE objectId=?`                                                                                                                                                                       |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            | `DELETE FROM franchise WHERE id=?`                                                                                                                                                                            |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
|                                                                                         |                         |                                                            |                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------+-------------------------+------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+